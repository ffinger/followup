<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">


<meta name="date" content="2019-02-15" />

<title>followup: package overview</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>



<link href="data:text/css;charset=utf-8,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23header%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%20code%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" rel="stylesheet" type="text/css" />

</head>

<body>




<h1 class="title toc-ignore">followup: package overview</h1>
<h4 class="date"><em>2019-02-15</em></h4>


<div id="TOC">
<ul>
<li><a href="#installing-the-package">Installing the package</a></li>
<li><a href="#main-visible-functions-of-the-package">Main visible functions of the package</a></li>
<li><a href="#background">Background</a><ul>
<li><a href="#contact-has-never-been-followed-up">Contact has never been followed up</a></li>
<li><a href="#contact-has-previously-been-followed-up">Contact has previously been followed up</a></li>
</ul></li>
<li><a href="#examples">Examples</a><ul>
<li><a href="#all-contacts-have-the-same-probability-of-getting-disease">All contacts have the same probability of getting disease</a></li>
<li><a href="#probability-of-getting-disease-depends-on-type-of-exposure">Probability of getting disease depends on type of exposure</a></li>
</ul></li>
</ul>
</div>

<div id="installing-the-package" class="section level1">
<h1>Installing the package</h1>
<!-- To install the current stable, CRAN version of the package, type:

```r
install.packages("followup")
``` -->
<p>To benefit from the latest features and bug fixes, install the development, <em>github</em> version of the package using:</p>
<p>```</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">devtools<span class="op">::</span><span class="kw">install_github</span>(<span class="st">&quot;reconhub/followup&quot;</span>)</code></pre></div>
<p>Note that this requires the package <em>devtools</em> installed.</p>
</div>
<div id="main-visible-functions-of-the-package" class="section level1">
<h1>Main visible functions of the package</h1>
<p>The main functions of the package include:</p>
<p><strong><code>followup_priorities()</code></strong> : Compute the followup priorities for a list of contacts.</p>
<p>Outputs the probability that the symptoms onset of a contact was between the last follow up (day of last follow up included in interval by default, see parameter include_last_follow_up) and the analysis date, which defaults to day before current day and is included in interval.</p>
<p><strong><code>p_new_onset()</code></strong> Computes the probability of new symptoms within a range of dates for a particular contact, given the incubation period.</p>
<p><strong><code>p_integral_onset()</code></strong> Computes the probability of new symptoms on a particular day for a particular contact.</p>
<p><strong><code>plot(priorities)</code></strong> <em>yet to implement</em></p>
<p><strong><code>to_html(priorities)</code></strong> <em>yet to implement</em></p>
</div>
<div id="background" class="section level1">
<h1>Background</h1>
<div id="contact-has-never-been-followed-up" class="section level2">
<h2>Contact has never been followed up</h2>
<p>The probability of symptoms onset by day <span class="math inline">\(t\)</span> after exposure event that leads to symptomatic infection is</p>
<p><span class="math display">\[P(\mathrm{onset\,by\,day\,}t) = \sum_{\tau=0}^t p_I(\tau)\]</span></p>
<p>where <span class="math inline">\(p_I(\tau)\)</span> is the probability that the incubation period is <span class="math inline">\(\tau\)</span>.</p>
<p>Combined with a given probability <span class="math inline">\(p_S\)</span> of an exposure event leading to symptoms we thus get a probability of symptoms by day <span class="math inline">\(t\)</span> of</p>
<p><span class="math display">\[P(\mathrm{symptoms\,by\,day\,}t) = p_S\,\sum_{\tau=0}^t p_I(\tau)\]</span></p>
</div>
<div id="contact-has-previously-been-followed-up" class="section level2">
<h2>Contact has previously been followed up</h2>
<p>If a contact has previously been followed up on day <span class="math inline">\(T\)</span> and no symptoms observed the probability of onset on day <span class="math inline">\(t &gt;= T\)</span> has to be modified as follows</p>
<p><span class="math display">\[P(\mathrm{onset\,by\,day\,}t \; | \; \mathrm{no\,onset\,by\,day\,}T) = \dfrac{\sum_{\tau=T}^t p_I(\tau)}{1 - \sum_{\tau=0}^{T-1} p_I(\tau)}\]</span></p>
<p>and</p>
<p><span class="math display">\[P(\mathrm{symptoms\,by\,day\,}t) = p_S\,\dfrac{\sum_{\tau=T}^t p_I(\tau)}{1 - \sum_{\tau=0}^{T-1} p_I(\tau)}\]</span></p>
<p><strong>Note</strong> that due to the discrete nature of the problem, a decision has to be made if observing no symptoms at some time during day <span class="math inline">\(T\)</span> is taken as the onset of symptoms being at a time <span class="math inline">\(t\)</span> after the end of day <span class="math inline">\(T-1\)</span> (and thus could be during day <span class="math inline">\(T\)</span> but after the observation), or after the end of day <span class="math inline">\(T\)</span>. By default this package assumes that follow up on day <span class="math inline">\(T\)</span> ensures that symptoms onset has not occurred before the end of day <span class="math inline">\(T-1\)</span>, as shown in the equations above. The parameter <code>include_last_follow_up</code> can be used to modify this behaviour.</p>
</div>
</div>
<div id="examples" class="section level1">
<h1>Examples</h1>
<p>Load environment:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(dplyr)
<span class="kw">library</span>(magrittr)
<span class="kw">library</span>(epitrix)
<span class="kw">library</span>(distcrete)
<span class="kw">library</span>(followup)
<span class="kw">library</span>(ggplot2)</code></pre></div>
<p>Set up the incubation period distribution:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">incubation_days &lt;-<span class="st"> </span><span class="dv">0</span><span class="op">:</span><span class="dv">12</span>
incubation_frequency &lt;-<span class="st"> </span><span class="kw">distcrete</span>(<span class="st">&quot;gamma&quot;</span>, <span class="dv">1</span>, <span class="dt">shape =</span> <span class="dv">12</span>, <span class="dt">rate =</span> <span class="dv">3</span>, <span class="dt">w =</span>
<span class="dv">0</span>)<span class="op">$</span><span class="kw">d</span>(incubation_days)

<span class="kw">plot</span>(incubation_days, incubation_frequency, <span class="dt">type =</span> <span class="st">&quot;h&quot;</span>)</code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>Make a list of example contacts each having several possible <strong>exposure dates</strong> and some having a date when they were <strong>last followed up</strong>. Contacts that have never been followed up will have NA in the <code>date_last_followup</code> column:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">n =<span class="st"> </span><span class="dv">20</span>
contact_list &lt;-<span class="st"> </span><span class="kw">data.frame</span>(
  <span class="dt">id_contact =</span> <span class="kw">replicate</span>(n, <span class="kw">paste</span>(<span class="kw">sample</span>(letters, <span class="dv">6</span>, <span class="dt">replace =</span> <span class="ot">TRUE</span>),
          <span class="dt">collapse =</span> <span class="st">&quot;&quot;</span>)),
  <span class="dt">type_exposure =</span> <span class="kw">sample</span>(<span class="kw">c</span>(<span class="st">&quot;hospital&quot;</span>, <span class="st">&quot;funeral&quot;</span>, <span class="st">&quot;family&quot;</span>, <span class="st">&quot;other&quot;</span>), n, <span class="dt">replace =</span> <span class="ot">TRUE</span>)
)

<span class="co">#function used to create toy exposure dates</span>
mkexposures &lt;-<span class="st"> </span><span class="cf">function</span>(foo) foo <span class="op">-</span><span class="st"> </span>base<span class="op">::</span><span class="kw">sample</span>(incubation_days, <span class="dt">size =</span> <span class="kw">sample.int</span>(<span class="dv">6</span>, <span class="dt">size =</span> <span class="dv">1</span>), <span class="dt">replace =</span> <span class="ot">FALSE</span>, <span class="dt">prob =</span> incubation_frequency)

contact_list<span class="op">$</span>dates_exposure &lt;-<span class="st"> </span><span class="kw">sapply</span>(<span class="kw">Sys.Date</span>() <span class="op">-</span><span class="st"> </span><span class="dv">10</span> <span class="op">+</span><span class="st"> </span><span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, n, <span class="dt">replace =</span> <span class="ot">TRUE</span>), mkexposures)
contact_list<span class="op">$</span>date_last_followup &lt;-<span class="st"> </span><span class="kw">Sys.Date</span>() <span class="op">-</span><span class="st"> </span><span class="kw">sample</span>(<span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>, <span class="kw">rep</span>(<span class="ot">NA</span>, <span class="dv">3</span>)), n, <span class="dt">replace =</span> <span class="ot">TRUE</span>)

<span class="kw">print</span>(contact_list)
<span class="co">#&gt;    id_contact type_exposure                           dates_exposure</span>
<span class="co">#&gt; 1      oveznt        family                                    17937</span>
<span class="co">#&gt; 2      cswote         other                      17933, 17934, 17937</span>
<span class="co">#&gt; 3      twkyap       funeral                             17936, 17935</span>
<span class="co">#&gt; 4      qwnovc       funeral 17933, 17935, 17936, 17937, 17934, 17930</span>
<span class="co">#&gt; 5      pcnqlj         other                                    17939</span>
<span class="co">#&gt; 6      vbwbwr       funeral               17939, 17938, 17937, 17936</span>
<span class="co">#&gt; 7      ahyszo         other        17929, 17931, 17930, 17928, 17926</span>
<span class="co">#&gt; 8      rjxyvd        family               17940, 17938, 17936, 17939</span>
<span class="co">#&gt; 9      hmtabs         other        17936, 17937, 17933, 17935, 17934</span>
<span class="co">#&gt; 10     kchwwj        family                      17938, 17936, 17937</span>
<span class="co">#&gt; 11     vjtebn        family                             17937, 17939</span>
<span class="co">#&gt; 12     dykzsh        family                             17932, 17930</span>
<span class="co">#&gt; 13     kwjkxo       funeral                             17937, 17936</span>
<span class="co">#&gt; 14     oapdng        family               17932, 17931, 17934, 17930</span>
<span class="co">#&gt; 15     lrmdpq        family 17939, 17937, 17938, 17936, 17940, 17941</span>
<span class="co">#&gt; 16     nzxlqd        family 17936, 17937, 17939, 17935, 17938, 17934</span>
<span class="co">#&gt; 17     fehubq         other                             17933, 17934</span>
<span class="co">#&gt; 18     dnbeqf         other 17931, 17934, 17932, 17933, 17930, 17928</span>
<span class="co">#&gt; 19     twpfhy      hospital               17935, 17934, 17932, 17933</span>
<span class="co">#&gt; 20     tpjhph        family                             17935, 17933</span>
<span class="co">#&gt;    date_last_followup</span>
<span class="co">#&gt; 1                &lt;NA&gt;</span>
<span class="co">#&gt; 2          2019-02-12</span>
<span class="co">#&gt; 3                &lt;NA&gt;</span>
<span class="co">#&gt; 4          2019-02-13</span>
<span class="co">#&gt; 5          2019-02-10</span>
<span class="co">#&gt; 6          2019-02-12</span>
<span class="co">#&gt; 7                &lt;NA&gt;</span>
<span class="co">#&gt; 8                &lt;NA&gt;</span>
<span class="co">#&gt; 9                &lt;NA&gt;</span>
<span class="co">#&gt; 10         2019-02-14</span>
<span class="co">#&gt; 11         2019-02-12</span>
<span class="co">#&gt; 12         2019-02-12</span>
<span class="co">#&gt; 13         2019-02-09</span>
<span class="co">#&gt; 14         2019-02-14</span>
<span class="co">#&gt; 15         2019-02-14</span>
<span class="co">#&gt; 16               &lt;NA&gt;</span>
<span class="co">#&gt; 17               &lt;NA&gt;</span>
<span class="co">#&gt; 18         2019-02-09</span>
<span class="co">#&gt; 19         2019-02-10</span>
<span class="co">#&gt; 20               &lt;NA&gt;</span></code></pre></div>
<div id="all-contacts-have-the-same-probability-of-getting-disease" class="section level2">
<h2>All contacts have the same probability of getting disease</h2>
<p>Now compute the probability of the symptoms onset being between the last day of follow up and yesterday (including start and end days):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">contact_list_p &lt;-<span class="st"> </span><span class="kw">followup_priorities</span>(
                  contact_list,
                  dates_exposure,
                  date_last_followup,
                  <span class="dt">p_disease =</span> <span class="fl">0.3</span>,
                  <span class="dt">incubation_period =</span> incubation_frequency
                )
<span class="co">#&gt; Warning in followup_priorities(contact_list, dates_exposure,</span>
<span class="co">#&gt; date_last_followup, : Incubation period probabilities don't sum to 1 but to</span>
<span class="co">#&gt; 0.999999873689809 Automatically adjusted.</span>

<span class="kw">print</span>(contact_list_p)
<span class="co">#&gt;    id_contact type_exposure                           dates_exposure</span>
<span class="co">#&gt; 7      ahyszo         other        17929, 17931, 17930, 17928, 17926</span>
<span class="co">#&gt; 18     dnbeqf         other 17931, 17934, 17932, 17933, 17930, 17928</span>
<span class="co">#&gt; 17     fehubq         other                             17933, 17934</span>
<span class="co">#&gt; 12     dykzsh        family                             17932, 17930</span>
<span class="co">#&gt; 19     twpfhy      hospital               17935, 17934, 17932, 17933</span>
<span class="co">#&gt; 20     tpjhph        family                             17935, 17933</span>
<span class="co">#&gt; 3      twkyap       funeral                             17936, 17935</span>
<span class="co">#&gt; 9      hmtabs         other        17936, 17937, 17933, 17935, 17934</span>
<span class="co">#&gt; 13     kwjkxo       funeral                             17937, 17936</span>
<span class="co">#&gt; 2      cswote         other                      17933, 17934, 17937</span>
<span class="co">#&gt; 4      qwnovc       funeral 17933, 17935, 17936, 17937, 17934, 17930</span>
<span class="co">#&gt; 1      oveznt        family                                    17937</span>
<span class="co">#&gt; 14     oapdng        family               17932, 17931, 17934, 17930</span>
<span class="co">#&gt; 16     nzxlqd        family 17936, 17937, 17939, 17935, 17938, 17934</span>
<span class="co">#&gt; 6      vbwbwr       funeral               17939, 17938, 17937, 17936</span>
<span class="co">#&gt; 10     kchwwj        family                      17938, 17936, 17937</span>
<span class="co">#&gt; 11     vjtebn        family                             17937, 17939</span>
<span class="co">#&gt; 8      rjxyvd        family               17940, 17938, 17936, 17939</span>
<span class="co">#&gt; 15     lrmdpq        family 17939, 17937, 17938, 17936, 17940, 17941</span>
<span class="co">#&gt; 5      pcnqlj         other                                    17939</span>
<span class="co">#&gt;    date_last_followup p_disease   p_onset p_symptoms followup_priority</span>
<span class="co">#&gt; 7                &lt;NA&gt;       0.3 0.9999981 0.29999943                 1</span>
<span class="co">#&gt; 18         2019-02-09       0.3 0.9987842 0.29963525                 2</span>
<span class="co">#&gt; 17               &lt;NA&gt;       0.3 0.9985249 0.29955748                 3</span>
<span class="co">#&gt; 12         2019-02-12       0.3 0.9951459 0.29854378                 4</span>
<span class="co">#&gt; 19         2019-02-10       0.3 0.9934472 0.29803416                 5</span>
<span class="co">#&gt; 20               &lt;NA&gt;       0.3 0.9933346 0.29800039                 6</span>
<span class="co">#&gt; 3                &lt;NA&gt;       0.3 0.9661040 0.28983121                 7</span>
<span class="co">#&gt; 9                &lt;NA&gt;       0.3 0.9489012 0.28467037                 8</span>
<span class="co">#&gt; 13         2019-02-09       0.3 0.8801805 0.26405415                 9</span>
<span class="co">#&gt; 2          2019-02-12       0.3 0.8460889 0.25382667                10</span>
<span class="co">#&gt; 4          2019-02-13       0.3 0.8316026 0.24948078                11</span>
<span class="co">#&gt; 1                &lt;NA&gt;       0.3 0.8152483 0.24457449                12</span>
<span class="co">#&gt; 14         2019-02-14       0.3 0.8062189 0.24186567                13</span>
<span class="co">#&gt; 16               &lt;NA&gt;       0.3 0.7467211 0.22401634                14</span>
<span class="co">#&gt; 6          2019-02-12       0.3 0.6023510 0.18070529                15</span>
<span class="co">#&gt; 10         2019-02-14       0.3 0.5161743 0.15485230                16</span>
<span class="co">#&gt; 11         2019-02-12       0.3 0.5011081 0.15033243                17</span>
<span class="co">#&gt; 8                &lt;NA&gt;       0.3 0.4251498 0.12754493                18</span>
<span class="co">#&gt; 15         2019-02-14       0.3 0.2133825 0.06401476                19</span>
<span class="co">#&gt; 5          2019-02-10       0.3 0.1969916 0.05909749                20</span></code></pre></div>
</div>
<div id="probability-of-getting-disease-depends-on-type-of-exposure" class="section level2">
<h2>Probability of getting disease depends on type of exposure</h2>
<p>Above we assumed that every kind of exposure results in the same probability of developing disease. Thus the prioritization is solely based on the incubation period, the time spent since exposure and the last follow up.</p>
<p>Letâ€™s now take into account different exposure pathways and assign different probabilities of developing disease after different types of exposure:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pathways =<span class="st"> </span><span class="kw">data.frame</span>(
  <span class="dt">type_exposure =</span> <span class="kw">c</span>(<span class="st">&quot;hospital&quot;</span>, <span class="st">&quot;funeral&quot;</span>, <span class="st">&quot;family&quot;</span>, <span class="st">&quot;other&quot;</span>),
  <span class="dt">p_disease =</span> <span class="kw">c</span>(<span class="fl">0.2</span>, <span class="fl">0.3</span>, <span class="fl">0.45</span>, <span class="fl">0.12</span>)
)

<span class="kw">print</span>(pathways)
<span class="co">#&gt;   type_exposure p_disease</span>
<span class="co">#&gt; 1      hospital      0.20</span>
<span class="co">#&gt; 2       funeral      0.30</span>
<span class="co">#&gt; 3        family      0.45</span>
<span class="co">#&gt; 4         other      0.12</span></code></pre></div>
<p>Include those probabilities in the contact list:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">contact_list &lt;-<span class="st"> </span>contact_list <span class="op">%&gt;%</span>
<span class="st">                  </span>dplyr<span class="op">::</span><span class="kw">left_join</span>(pathways, <span class="dt">by =</span> <span class="st">&quot;type_exposure&quot;</span>)

<span class="kw">print</span>(contact_list)
<span class="co">#&gt;    id_contact type_exposure                           dates_exposure</span>
<span class="co">#&gt; 1      oveznt        family                                    17937</span>
<span class="co">#&gt; 2      cswote         other                      17933, 17934, 17937</span>
<span class="co">#&gt; 3      twkyap       funeral                             17936, 17935</span>
<span class="co">#&gt; 4      qwnovc       funeral 17933, 17935, 17936, 17937, 17934, 17930</span>
<span class="co">#&gt; 5      pcnqlj         other                                    17939</span>
<span class="co">#&gt; 6      vbwbwr       funeral               17939, 17938, 17937, 17936</span>
<span class="co">#&gt; 7      ahyszo         other        17929, 17931, 17930, 17928, 17926</span>
<span class="co">#&gt; 8      rjxyvd        family               17940, 17938, 17936, 17939</span>
<span class="co">#&gt; 9      hmtabs         other        17936, 17937, 17933, 17935, 17934</span>
<span class="co">#&gt; 10     kchwwj        family                      17938, 17936, 17937</span>
<span class="co">#&gt; 11     vjtebn        family                             17937, 17939</span>
<span class="co">#&gt; 12     dykzsh        family                             17932, 17930</span>
<span class="co">#&gt; 13     kwjkxo       funeral                             17937, 17936</span>
<span class="co">#&gt; 14     oapdng        family               17932, 17931, 17934, 17930</span>
<span class="co">#&gt; 15     lrmdpq        family 17939, 17937, 17938, 17936, 17940, 17941</span>
<span class="co">#&gt; 16     nzxlqd        family 17936, 17937, 17939, 17935, 17938, 17934</span>
<span class="co">#&gt; 17     fehubq         other                             17933, 17934</span>
<span class="co">#&gt; 18     dnbeqf         other 17931, 17934, 17932, 17933, 17930, 17928</span>
<span class="co">#&gt; 19     twpfhy      hospital               17935, 17934, 17932, 17933</span>
<span class="co">#&gt; 20     tpjhph        family                             17935, 17933</span>
<span class="co">#&gt;    date_last_followup p_disease</span>
<span class="co">#&gt; 1                &lt;NA&gt;      0.45</span>
<span class="co">#&gt; 2          2019-02-12      0.12</span>
<span class="co">#&gt; 3                &lt;NA&gt;      0.30</span>
<span class="co">#&gt; 4          2019-02-13      0.30</span>
<span class="co">#&gt; 5          2019-02-10      0.12</span>
<span class="co">#&gt; 6          2019-02-12      0.30</span>
<span class="co">#&gt; 7                &lt;NA&gt;      0.12</span>
<span class="co">#&gt; 8                &lt;NA&gt;      0.45</span>
<span class="co">#&gt; 9                &lt;NA&gt;      0.12</span>
<span class="co">#&gt; 10         2019-02-14      0.45</span>
<span class="co">#&gt; 11         2019-02-12      0.45</span>
<span class="co">#&gt; 12         2019-02-12      0.45</span>
<span class="co">#&gt; 13         2019-02-09      0.30</span>
<span class="co">#&gt; 14         2019-02-14      0.45</span>
<span class="co">#&gt; 15         2019-02-14      0.45</span>
<span class="co">#&gt; 16               &lt;NA&gt;      0.45</span>
<span class="co">#&gt; 17               &lt;NA&gt;      0.12</span>
<span class="co">#&gt; 18         2019-02-09      0.12</span>
<span class="co">#&gt; 19         2019-02-10      0.20</span>
<span class="co">#&gt; 20               &lt;NA&gt;      0.45</span></code></pre></div>
<p>Now recompute the priorities:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">contact_list_p2 &lt;-<span class="st"> </span><span class="kw">followup_priorities</span>(
                  contact_list,
                  dates_exposure,
                  date_last_followup,
                  p_disease,
                  <span class="dt">incubation_period =</span> incubation_frequency
                )
<span class="co">#&gt; Warning in followup_priorities(contact_list, dates_exposure,</span>
<span class="co">#&gt; date_last_followup, : Incubation period probabilities don't sum to 1 but to</span>
<span class="co">#&gt; 0.999999873689809 Automatically adjusted.</span>

<span class="kw">print</span>(contact_list_p2)
<span class="co">#&gt;    id_contact type_exposure                           dates_exposure</span>
<span class="co">#&gt; 12     dykzsh        family                             17932, 17930</span>
<span class="co">#&gt; 20     tpjhph        family                             17935, 17933</span>
<span class="co">#&gt; 1      oveznt        family                                    17937</span>
<span class="co">#&gt; 14     oapdng        family               17932, 17931, 17934, 17930</span>
<span class="co">#&gt; 16     nzxlqd        family 17936, 17937, 17939, 17935, 17938, 17934</span>
<span class="co">#&gt; 3      twkyap       funeral                             17936, 17935</span>
<span class="co">#&gt; 13     kwjkxo       funeral                             17937, 17936</span>
<span class="co">#&gt; 4      qwnovc       funeral 17933, 17935, 17936, 17937, 17934, 17930</span>
<span class="co">#&gt; 10     kchwwj        family                      17938, 17936, 17937</span>
<span class="co">#&gt; 11     vjtebn        family                             17937, 17939</span>
<span class="co">#&gt; 19     twpfhy      hospital               17935, 17934, 17932, 17933</span>
<span class="co">#&gt; 8      rjxyvd        family               17940, 17938, 17936, 17939</span>
<span class="co">#&gt; 6      vbwbwr       funeral               17939, 17938, 17937, 17936</span>
<span class="co">#&gt; 7      ahyszo         other        17929, 17931, 17930, 17928, 17926</span>
<span class="co">#&gt; 18     dnbeqf         other 17931, 17934, 17932, 17933, 17930, 17928</span>
<span class="co">#&gt; 17     fehubq         other                             17933, 17934</span>
<span class="co">#&gt; 9      hmtabs         other        17936, 17937, 17933, 17935, 17934</span>
<span class="co">#&gt; 2      cswote         other                      17933, 17934, 17937</span>
<span class="co">#&gt; 15     lrmdpq        family 17939, 17937, 17938, 17936, 17940, 17941</span>
<span class="co">#&gt; 5      pcnqlj         other                                    17939</span>
<span class="co">#&gt;    date_last_followup p_disease   p_onset p_symptoms followup_priority</span>
<span class="co">#&gt; 12         2019-02-12      0.45 0.9951459 0.44781566                 1</span>
<span class="co">#&gt; 20               &lt;NA&gt;      0.45 0.9933346 0.44700058                 2</span>
<span class="co">#&gt; 1                &lt;NA&gt;      0.45 0.8152483 0.36686174                 3</span>
<span class="co">#&gt; 14         2019-02-14      0.45 0.8062189 0.36279850                 4</span>
<span class="co">#&gt; 16               &lt;NA&gt;      0.45 0.7467211 0.33602450                 5</span>
<span class="co">#&gt; 3                &lt;NA&gt;      0.30 0.9661040 0.28983121                 6</span>
<span class="co">#&gt; 13         2019-02-09      0.30 0.8801805 0.26405415                 7</span>
<span class="co">#&gt; 4          2019-02-13      0.30 0.8316026 0.24948078                 8</span>
<span class="co">#&gt; 10         2019-02-14      0.45 0.5161743 0.23227845                 9</span>
<span class="co">#&gt; 11         2019-02-12      0.45 0.5011081 0.22549865                10</span>
<span class="co">#&gt; 19         2019-02-10      0.20 0.9934472 0.19868944                11</span>
<span class="co">#&gt; 8                &lt;NA&gt;      0.45 0.4251498 0.19131739                12</span>
<span class="co">#&gt; 6          2019-02-12      0.30 0.6023510 0.18070529                13</span>
<span class="co">#&gt; 7                &lt;NA&gt;      0.12 0.9999981 0.11999977                14</span>
<span class="co">#&gt; 18         2019-02-09      0.12 0.9987842 0.11985410                15</span>
<span class="co">#&gt; 17               &lt;NA&gt;      0.12 0.9985249 0.11982299                16</span>
<span class="co">#&gt; 9                &lt;NA&gt;      0.12 0.9489012 0.11386815                17</span>
<span class="co">#&gt; 2          2019-02-12      0.12 0.8460889 0.10153067                18</span>
<span class="co">#&gt; 15         2019-02-14      0.45 0.2133825 0.09602215                19</span>
<span class="co">#&gt; 5          2019-02-10      0.12 0.1969916 0.02363900                20</span></code></pre></div>
</div>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
